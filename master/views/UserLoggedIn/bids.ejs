<!DOCTYPE html>
<head>
    <title>Bids | degreeMe</title>
    <link rel="icon" href="../assets/img/favicon.png" type="image/png" />
    
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="initial-scale=1,user-scalable=no,viewport-fit=cover">

    <!-- Stylesheets -->
    <link rel="icon" href="assets/img/favicon.png" type="image/png" />
    <link rel="stylesheet" href="../assets/bootstrap/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@600&display=swap" rel="stylesheet">
    <link href="../assets/css/main1.css" rel="stylesheet">
    <link href="../assets/css/userProfile.css" rel="stylesheet">
    <link href="../assets/css/home.css" rel="stylesheet">
    <link href="../assets/css/bids.css" rel="stylesheet">
 <!-- Require jquery -->
 <script src="../assets/jquery/dist/jquery.js"></script>
</head>
<body>
    <div class="overlay">
    </div>
    <div class="page-container">
        <%- include ('partials/sideBar.ejs')%>
        <%- include ('partials/horizontalHeader.ejs')%>

        <div class="homeContainer">
            <div class="payment-processing-container">
                <div class="d-flex justify-content-center">
                    <div class="spinner-border" role="status">
                        <span class="sr-only">Payment Processing</span>
                    </div>
                    <h3 class="payment-status">Payment Processing</h3>
                </div>

            </div>
            <div class="contentBlock1">
                <%if(bidOpen){%>
                <h3 class="bids-header">Select a bidder from the list below</h3>
                <div class="bids-container">
                    <div class="bids-table">
                            <table class="">
                                <thead class="">
                                            <tr>
                                                <th class="text-light">Bidder</th>
                                                <th class="text-light">Price</th>
                                                <th class="text-light">Select a Bidder</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% for(x in bids){%>
                                                <tr>
                                                    <td class="bid-td">
                                                        <a href="/User/<%=bids[x].Bidder%>">
                                                            <img src="../<%=bids[x].BidderImg%>" class="bidderImg"/>
                                                            <span class="bidderHandle"><%=bids[x].Bidder%></span>
                                                        </a>
                                                    </td>
                                                    <td class="bid-td">
                                                        <span class="bidderHandle">
                                                        $<%=bids[x].Price%>
                                                        </span>
                                                    </td>
                                                    <td class="bid-td"><input type="radio" name="bidder" value="<%=bids[x].Bidder%>"/></td>
                                                    <input name="stripeId" type="hidden" value="<%=bids[x].StripeId%>"/>
                                                    <input name="dueDate" type="hidden" value="<%=dueDate%>"/>
                                                    <input name="bidId" type="hidden" value="<%=bids[x]._id%>"/>
                                                    <input name="price" type="hidden" value=" <%=bids[x].Price%>"/>
                                                    <input name="description" type="hidden" value=" <%=bids[x].Description%>"/>
                                                   
                                                </tr>
                                                <%}%>
                                             
                                    </tbody>
                            </table>
                            <h3 class="bids-header bids-header1">Payment Details</h3>
                    <div class="payment-container">
                        <div class="payment-form-wrapper">
                            <p style="text-align:left;">Once you pay, a new conversation thread will open between you and the selected bidder. We will hold your funds until the task is complete.
                                In the event that the task does not get completed, you will receive a 100% refund and the bidder's account will receive a strike.

                            </p>
                            <form class="stripe-form" id="stripe-payment-form">
                                <input name="handle" type="hidden" />
                                <input name="price" type="hidden"/>
                                <input name="timelineDate" type="hidden" value="<%=dueDate%>"/>
                                <input name="timelineId" type="hidden" value="<%=params.timelineId%>"/>

                               
                                <!-- need stripe id -->
                                <input name="StripeId" type="hidden" value="" />
                                <div id="card-element" style="width:500px;background-color:white;">
                                    <!-- Elements will create input elements here -->
                                </div>
                                <div id="card-errors" role="alert"></div>
                                
                                <button id="submit" class="btn btn-primary stripe-submit help-request-pay">Pay</button>
                            </form>    
                        </div>
                               
                    </div>
                     
                    </div>

                      
                    
            </div>
        <%}else{%>
            <h1>This bid has been closed</h1>
        <%}%>
        </div>
        </div>
    </div>         
</body>
   
    <script src="https://js.stripe.com/v3/"></script>
    <script type="text/javascript" src="../assets/js/Client-DateFunctions.js"></script>
    <script src="../assets/js/ajaxCalls/selectBid.js"></script>
</html>